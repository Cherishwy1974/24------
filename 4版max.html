<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高职数学数字化教材开发与应用研究</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&display=swap');
        
        :root {
            --primary: #0f4c81;
            --secondary: #0078d7;
            --accent: #00b0ff;
            --highlight: #00e5ff;
            --dark: #0a1929;
            --light: #f5f9ff;
            --map-bg: #0f2442;
            --text: #ffffff;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --blur: 8px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans SC', sans-serif;
        }
        
        body, html {
            overflow: hidden;
            width: 100%;
            height: 100%;
            background-color: var(--dark);
            color: var(--text);
        }
        
        /* Map view container */
        #map-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--map-bg);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            z-index: 100;
            transition: transform 0.5s ease, opacity 0.5s ease;
            transform: scale(1);
            opacity: 1;
        }
        
        #map-container.hidden {
            transform: scale(5);
            opacity: 0;
            pointer-events: none;
        }
        
        /* Flight path */
        .flight-path {
            position: absolute;
            fill: none;
            stroke: rgba(0, 178, 255, 0.5);
            stroke-width: 2;
            stroke-dasharray: 8;
            animation: dash 30s linear infinite;
            filter: drop-shadow(0 0 8px rgba(0, 178, 255, 0.8));
        }
        
        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }
        
        /* Airplane icon */
        #airplane {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'%3E%3Cpath d='M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z'/%3E%3C/svg%3E");
            background-size: contain;
            background-repeat: no-repeat;
            filter: drop-shadow(0 0 5px rgba(0, 178, 255, 0.8));
            z-index: 101;
            transform-origin: center;
            transition: left 1.5s cubic-bezier(.42,0,.58,1), top 1.5s cubic-bezier(.42,0,.58,1), transform 1.5s cubic-bezier(.42,0,.58,1);
        }
        
        /* Location markers */
        .location-marker {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: rgba(0, 178, 255, 0.2);
            border: 2px solid rgba(0, 178, 255, 0.8);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 102;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            color: #fff;
            box-shadow: 0 0 0 rgba(0, 178, 255, 0.6);
            animation: pulse 2s infinite;
            transition: all 0.3s ease;
        }
        
        .location-marker:hover {
            background-color: rgba(0, 178, 255, 0.4);
            transform: translate(-50%, -50%) scale(1.2);
        }
        
        .location-marker.current {
            background-color: rgba(0, 230, 255, 0.4);
            border-color: rgba(0, 230, 255, 1);
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 178, 255, 0.6);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(0, 178, 255, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(0, 178, 255, 0);
            }
        }
        
        /* Location labels */
        .location-label {
            position: absolute;
            font-size: 12px;
            color: #fff;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            transform: translate(-50%, 0);
            white-space: nowrap;
            pointer-events: none;
            opacity: 0.8;
        }
        
        /* Slides container */
        #slides-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            z-index: 10;
        }
        
        /* Individual slides */
        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .slide.active {
            opacity: 1;
            visibility: visible;
            z-index: 20;
        }
        
        /* Slide content */
        .slide-header {
            height: 80px;
            background: linear-gradient(90deg, rgba(15, 76, 129, 0.9), rgba(0, 120, 215, 0.8));
            display: flex;
            align-items: center;
            padding: 0 50px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 5;
        }
        
        .slide-title {
            font-size: 32px;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .slide-content {
            flex: 1;
            padding: 30px 50px;
            overflow-y: auto;
            background-color: rgba(10, 25, 41, 0.9);
        }
        
        .slide-footer {
            height: 50px;
            background: linear-gradient(90deg, rgba(15, 76, 129, 0.9), rgba(0, 120, 215, 0.8));
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 50px;
            font-size: 14px;
        }
        
        .slide-number {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        /* Back to map button */
        .back-to-map {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 200;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(0);
        }
        
        .back-to-map.visible {
            opacity: 1;
            transform: scale(1);
        }
        
        .back-to-map:hover {
            background-color: var(--accent);
            transform: scale(1.1);
        }
        
        .back-to-map-icon {
            width: 24px;
            height: 24px;
            fill: #fff;
        }
        
        /* Content styling */
        h1, h2, h3, h4, h5, h6 {
            color: #fff;
            margin-bottom: 20px;
        }
        
        p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 20px;
        }
        
        li {
            margin-bottom: 10px;
        }
        
        .two-column {
            display: flex;
            gap: 30px;
            margin: 20px 0;
        }
        
        .column {
            flex: 1;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .card h3 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 22px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }
        
        .card ul {
            margin-left: 15px;
        }
        
        .highlight {
            color: var(--accent);
            font-weight: bold;
        }
        
        .feature-box {
            border-left: 4px solid var(--accent);
            padding: 15px 20px;
            margin: 20px 0;
            background: rgba(0, 120, 215, 0.1);
            border-radius: 0 5px 5px 0;
        }
        
        /* Resource preview frame */
        .resource-frame {
            width: 100%;
            height: 400px;
            border: none;
            border-radius: 10px;
            margin: 20px 0;
            background-color: #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* Action button */
        .action-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 24px;
            background-color: var(--secondary);
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .action-button:hover {
            background-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .text-center {
            text-align: center;
        }
        
        /* Navigation controls */
        .nav-controls {
            position: fixed;
            bottom: 30px;
            left: 30px;
            display: flex;
            gap: 20px;
            z-index: 200;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .nav-controls.visible {
            opacity: 1;
        }
        
        .nav-button {
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #fff;
            font-size: 20px;
        }
        
        .nav-button:hover {
            background-color: var(--secondary);
            transform: scale(1.1);
        }
        
        /* Fullscreen content view */
        .fullscreen-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--dark);
            z-index: 1000;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .fullscreen-view.active {
            opacity: 1;
        }
        
        .fullscreen-view iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background-color: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            background-color: var(--accent);
            transform: scale(1.1);
        }
        
        .loading-spinner {
            display: inline-block;
            width: 80px;
            height: 80px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .loading-spinner:after {
            content: " ";
            display: block;
            width: 64px;
            height: 64px;
            margin: 8px;
            border-radius: 50%;
            border: 6px solid var(--accent);
            border-color: var(--accent) transparent var(--accent) transparent;
            animation: spinner 1.2s linear infinite;
        }
        
        @keyframes spinner {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        /* Location title popup */
        .location-title {
            position: absolute;
            background-color: rgba(15, 76, 129, 0.9);
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            color: #fff;
            transform: translate(-50%, -120%);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            pointer-events: none;
            white-space: nowrap;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        .location-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid rgba(15, 76, 129, 0.9);
        }
        
        .location-marker:hover + .location-title {
            opacity: 1;
            visibility: visible;
        }
        
        /* Keyboard navigation hint */
        .keyboard-hint {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-radius: 30px;
            color: #fff;
            font-size: 14px;
            z-index: 999;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 1;
            transition: opacity 0.5s ease;
        }
        
        .key {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        /* Initial welcome overlay */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--dark);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 1s ease;
        }
        
        .welcome-content {
            text-align: center;
            max-width: 800px;
            padding: 30px;
        }
        
        .welcome-title {
            font-size: 48px;
            margin-bottom: 20px;
            color: #fff;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .welcome-subtitle {
            font-size: 24px;
            margin-bottom: 40px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .start-journey {
            padding: 15px 30px;
            background-color: var(--secondary);
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .start-journey:hover {
            background-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <!-- Welcome overlay -->
    <div class="welcome-overlay" id="welcome-overlay">
        <div class="welcome-content">
            <h1 class="welcome-title">高职数学数字化教材开发与应用研究</h1>
            <p class="welcome-subtitle">跟随我们的航空旅程，探索数字化教材建设的创新成果</p>
            <button class="start-journey" id="start-journey">开始旅程</button>
        </div>
    </div>

    <!-- Map view -->
    <div id="map-container">
        <!-- Flight path will be created dynamically with JavaScript -->
        
        <!-- Airplane icon -->
        <div id="airplane"></div>
        
        <!-- Location markers will be created dynamically with JavaScript -->
    </div>
    
    <!-- Slides container -->
    <div id="slides-container">
        <!-- Slide 1: 研究背景与目标 -->
        <div class="slide" id="slide-1">
            <div class="slide-header">
                <div class="slide-title">研究背景与目标</div>
            </div>
            <div class="slide-content">
                <div class="two-column">
                    <div class="column">
                        <div class="card">
                            <h3>项目背景</h3>
                            <ul>
                                <li>落实高等职业教育公共基础课程改革要求</li>
                                <li>促进学科知识与行业应用场景深度融合</li>
                                <li>实现公共基础课与专业课的融通、衔接和配合</li>
                                <li>落实<span class="highlight">教育数字化战略行动</span>，创新教学数字化转型</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>总体目标</h3>
                            <p>构建<span class="highlight">"三维一体"</span>的数字化教材建设体系，打造数智赋能新形态教材</p>
                            
                            <div class="feature-box">
                                <p>本项目以高职数学数字教材建设为突破口，着力解决课程设置与教材、教学方式与方法、学科知识与应用、师生数字素养与培养等方面在数字化建设方面的难题和问题。</p>
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3>核心数据</h3>
                            <div class="two-column">
                                <div class="column text-center">
                                    <h2>13</h2>
                                    <p>教学模块</p>
                                </div>
                                <div class="column text-center">
                                    <h2>46</h2>
                                    <p>教学单元</p>
                                </div>
                                <div class="column text-center">
                                    <h2>253</h2>
                                    <p>数字化资源点</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div>西安航空职业技术学院</div>
                <div class="slide-number">1 / 9</div>
            </div>
        </div>
        
        <!-- Slide 2: 项目研究内容 -->
        <div class="slide" id="slide-2">
            <div class="slide-header">
                <div class="slide-title">项目研究内容</div>
            </div>
            <div class="slide-content">
                <div class="two-column">
                    <div class="column">
                        <div class="card">
                            <h3>研究内容</h3>
                            <ul>
                                <li>数字化教材内容体系与结构设计</li>
                                <li>数字化教材教学策略及模式研究</li>
                                <li>数字资源建设融合应用研究</li>
                                <li>学习效果评价体系构建与实证</li>
                            </ul>
                        </div>
                        
                        <div class="card">
                            <h3>创新亮点</h3>
                            <ul>
                                <li><span class="highlight">"三维进阶"</span>设计理念</li>
                                <li><span class="highlight">"知识习得-场景应用-素养提升"</span>立体化教学模式</li>
                                <li><span class="highlight">"双主线融合、双驱动对接、三目标达成"</span>研究思路</li>
                                <li>AI赋能课程育人</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>数字化教材"三维一体"建设体系</h3>
                            <div class="feature-box">
                                <p><strong>教材内容新生态：</strong>"场景驱动-平台支撑-评价引领"教材开发范式</p>
                            </div>
                            <div class="feature-box">
                                <p><strong>教学场景新形态：</strong>"产业链需求-教育链供给"双向机制</p>
                            </div>
                            <div class="feature-box">
                                <p><strong>教学资源新模态：</strong>"采集-分析-迭代"更新机制，实现"教-学-评-改"数字闭环</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div>高职数学数字化教材开发与应用研究</div>
                <div class="slide-number">2 / 9</div>
            </div>
        </div>
        
        <!-- Slide 3: 数字化教材平台展示 -->
        <div class="slide" id="slide-3">
            <div class="slide-header">
                <div class="slide-title">数字化教材平台展示</div>
            </div>
            <div class="slide-content">
                <h2 class="text-center">高职应用数学数字化教材</h2>
                
                <iframe class="resource-frame" data-src="https://textbookreader.lessonplan.cn/preview.html?userId=5389a55e-3f29-a2ee-e516-531610ca8cb6&textbookId=38b19ba0-43ff-11ef-9c00-ab267b8f1719&inductionId=74c58ecc-fd1b-eb96-4ad3-4af5e8f112c4&nodeId=QpoAhFXECC" title="数字化教材平台界面"></iframe>
                
                <div class="feature-box">
                    <p><span class="highlight">主要特色：</span>交互式学习体验、知识点快速定位、个性化学习路径、智能答疑系统</p>
                </div>
                
                <div class="text-center">
                    <button class="action-button view-fullscreen" data-src="https://textbookreader.lessonplan.cn/preview.html?userId=5389a55e-3f29-a2ee-e516-531610ca8cb6&textbookId=38b19ba0-43ff-11ef-9c00-ab267b8f1719&inductionId=74c58ecc-fd1b-eb96-4ad3-4af5e8f112c4&nodeId=QpoAhFXECC">
                        全屏查看教材平台
                    </button>
                </div>
            </div>
            <div class="slide-footer">
                <div>高职数学数字化教材开发与应用研究</div>
                <div class="slide-number">3 / 9</div>
            </div>
        </div>
        
        <!-- Slide 4: 虚拟实验库展示 -->
        <div class="slide" id="slide-4">
            <div class="slide-header">
                <div class="slide-title">虚拟实验库展示</div>
            </div>
            <div class="slide-content">
                <h2 class="text-center">交互式可视化高等数学虚拟实验库</h2>
                
                <iframe class="resource-frame" data-src="https://prod-9gua1kh1e319f2a2-1327807172.tcloudbaseapp.com/" title="虚拟实验库界面"></iframe>
                
                <div class="two-column">
                    <div class="column">
                        <div class="card">
                            <h3>主要功能</h3>
                            <ul>
                                <li>抽象数学概念可视化呈现</li>
                                <li>交互式数学实验平台</li>
                                <li>沉浸式学习环境构建</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>教学价值</h3>
                            <ul>
                                <li>突破数学抽象认知难题</li>
                                <li>激发学生学习兴趣</li>
                                <li>支持个性化实验探索</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="text-center">
                    <button class="action-button view-fullscreen" data-src="https://prod-9gua1kh1e319f2a2-1327807172.tcloudbaseapp.com/">
                        全屏查看虚拟实验库
                    </button>
                </div>
            </div>
            <div class="slide-footer">
                <div>高职数学数字化教材开发与应用研究</div>
                <div class="slide-number">4 / 9</div>
            </div>
        </div>
        
        <!-- Slide 5: 思政案例库展示 -->
        <div class="slide" id="slide-5">
            <div class="slide-header">
                <div class="slide-title">思政案例库展示</div>
            </div>
            <div class="slide-content">
                <h2 class="text-center">数学课程思政育人案例库</h2>
                
                <iframe class="resource-frame" data-src="https://dynamic-cases.web.app/" title="思政案例库界面"></iframe>
                
                <div class="feature-box">
                    <p>创新构建<span class="highlight">"数学文化传承+科学精神培育+职业素养养成"</span>三维度课程思政育人体系</p>
                </div>
                
                <div class="two-column">
                    <div class="column">
                        <div class="card">
                            <h3>特色内容</h3>
                            <ul>
                                <li>数学家精神案例库</li>
                                <li>科技报国项目包</li>
                                <li>职业伦理实训模块</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>育人价值</h3>
                            <ul>
                                <li>建立"知识点-思政点-职业点"三维映射</li>
                                <li>将价值塑造融入知识传授与能力培养</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="text-center">
                    <button class="action-button view-fullscreen" data-src="https://dynamic-cases.web.app/">
                        全屏查看思政案例库
                    </button>
                </div>
            </div>
            <div class="slide-footer">
                <div>高职数学数字化教材开发与应用研究</div>
                <div class="slide-number">5 / 9</div>
            </div>
        </div>
        
        <!-- Slide 6: 习题库展示 -->
        <div class="slide" id="slide-6">
            <div class="slide-header">
                <div class="slide-title">智能习题库展示</div>
            </div>
            <div class="slide-content">
                <h2 class="text-center">集成DeepSeek API的智能题库系统</h2>
                
                <iframe class="resource-frame" data-src="https://mathopli.xyz/" title="习题库界面"></iframe>
                
                <div class="feature-box">
                    <p>基于学生学习行为数据，利用<span class="highlight">AI算法实现自适应学习路径推荐</span>和智能答疑</p>
                </div>
                
                <div class="two-column">
                    <div class="column">
                        <div class="card">
                            <h3>核心功能</h3>
                            <ul>
                                <li>个性化题目推荐</li>
                                <li>实时反馈与提示</li>
                                <li>学习数据分析</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>应用价值</h3>
                            <ul>
                                <li>精准识别学习薄弱环节</li>
                                <li>提供个性化学习建议</li>
                                <li>培养学生自主学习能力</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="text-center">
                    <button class="action-button view-fullscreen" data-src="https://mathopli.xyz/">
                        全屏查看智能习题库
                    </button>
                </div>
            </div>
            <div class="slide-footer">
                <div>高职数学数字化教材开发与应用研究</div>
                <div class="slide-number">6 / 9</div>
            </div>
        </div>
        
        <!-- Slide 7: 数字化教学应用模式 -->
        <div class="slide" id="slide-7">
            <div class="slide-header">
                <div class="slide-title">数字化教学应用模式</div>
            </div>
            <div class="slide-content">
                <h2 class="text-center">创新"三位一体"立体化教学模式</h2>
                
                <div class="two-column">
                    <div class="column">
                        <div class="card">
                            <h3>知识习得层面</h3>
                            <div class="feature-box">
                                <p>"理论精讲-虚拟仿真-即时评测"三位一体学习平台</p>
                            </div>
                            <ul>
                                <li>破解数学抽象认知难题</li>
                                <li>支撑个性化学习需求</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>场景应用层面</h3>
                            <div class="feature-box">
                                <p>"数学建模-数据分析-算法逻辑"路径对接专业场景</p>
                            </div>
                            <ul>
                                <li>精准对接职业标准</li>
                                <li>开发产教融合项目案例</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>素养提升层面</h3>
                    <div class="feature-box">
                        <p>"数学建模→算法实现→决策支持"完整工作流程，依托Python工具链实现数学应用能力可视化培养</p>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div>高职数学数字化教材开发与应用研究</div>
                <div class="slide-number">7 / 9</div>
            </div>
        </div>
        
        <!-- Slide 8: 学习效果评价体系 -->
        <div class="slide" id="slide-8">
            <div class="slide-header">
                <div class="slide-title">学习效果评价体系</div>
            </div>
            <div class="slide-content">
                <h2 class="text-center">多维度学习效果评价框架</h2>
                
                <div class="card">
                    <h3>评价维度</h3>
                    <div class="two-column">
                        <div class="column">
                            <ul>
                                <li>知识掌握</li>
                                <li>技能应用</li>
                            </ul>
                        </div>
                        <div class="column">
                            <ul>
                                <li>数学思维</li>
                                <li>问题解决能力</li>
                            </ul>
                        </div>
                        <div class="column">
                            <ul>
                                <li>学习态度与参与度</li>
                                <li>数字素养</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="column">
                        <div class="card">
                            <h3>创新工具</h3>
                            <ul>
                                <li><span class="highlight">能力雷达图</span>：多维能力可视化</li>
                                <li><span class="highlight">学习热力图</span>：学习行为分析</li>
                                <li>个性化学习路径推荐</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>应用效果</h3>
                            <ul>
                                <li>西安航空职业技术学院试点应用</li>
                                <li>学生学习兴趣显著提高</li>
                                <li>数学应用能力明显增强</li>
                                <li>创新意识和解决实际问题能力提升</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div>高职数学数字化教材开发与应用研究</div>
                <div class="slide-number">8 / 9</div>
            </div>
        </div>
        
        <!-- Slide 9: 结束页 -->
        <div class="slide" id="slide-9">
            <div class="slide-header">
                <div class="slide-title">感谢聆听</div>
            </div>
            <div class="slide-content">
                <h2 class="text-center">欢迎交流与指导</h2>
                
                <div class="two-column">
                    <div class="column text-center">
                        <div class="card">
                            <h3>数字化教材</h3>
                            <p>交互式学习、情境化教学、智能化评价</p>
                            <button class="action-button view-fullscreen" data-src="https://textbookreader.lessonplan.cn/preview.html?userId=5389a55e-3f29-a2ee-e516-531610ca8cb6&textbookId=38b19ba0-43ff-11ef-9c00-ab267b8f1719&inductionId=74c58ecc-fd1b-eb96-4ad3-4af5e8f112c4&nodeId=QpoAhFXECC">
                                查看教材平台
                            </button>
                        </div>
                    </div>
                    <div class="column text-center">
                        <div class="card">
                            <h3>虚拟实验库</h3>
                            <p>数学概念可视化、交互式学习环境</p>
                            <button class="action-button view-fullscreen" data-src="https://prod-9gua1kh1e319f2a2-1327807172.tcloudbaseapp.com/">
                                查看虚拟实验库
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="column text-center">
                        <div class="card">
                            <h3>思政案例库</h3>
                            <p>课程思政育人、价值观塑造</p>
                            <button class="action-button view-fullscreen" data-src="https://dynamic-cases.web.app/">
                                查看思政案例库
                            </button>
                        </div>
                    </div>
                    <div class="column text-center">
                        <div class="card">
                            <h3>智能习题库</h3>
                            <p>AI推荐、个性化学习路径</p>
                            <button class="action-button view-fullscreen" data-src="https://mathopli.xyz/">
                                查看智能习题库
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card text-center" style="margin-top: 20px;">
                    <h3>西安航空职业技术学院</h3>
                    <p style="font-size: 20px;">数字化教育创新项目</p>
                </div>
            </div>
            <div class="slide-footer">
                <div>高职数学数字化教材开发与应用研究</div>
                <div class="slide-number">9 / 9</div>
            </div>
        </div>
    </div>
    
    <!-- Back to map button -->
    <div class="back-to-map" id="back-to-map">
        <svg class="back-to-map-icon" viewBox="0 0 24 24">
            <path d="M21 16V7.5C21 6.12 19.88 5 18.5 5H18L14.62 1.62C14.26 1.24 13.8 1 13.28 1H6.72C6.2 1 5.74 1.24 5.38 1.62L2 5H1.5C0.12 5 0 6.12 0 7.5V16C0 17.88 0.12 19 1.5 19H18.5C19.88 19 21 17.88 21 16ZM12 3.5C12.83 3.5 13.5 4.17 13.5 5C13.5 5.83 12.83 6.5 12 6.5C11.17 6.5 10.5 5.83 10.5 5C10.5 4.17 11.17 3.5 12 3.5ZM5 10H2V7H5V10ZM21 19.5C21 20.33 20.33 21 19.5 21H4.5C3.67 21 3 20.33 3 19.5V19H21V19.5Z" fill="currentColor"/>
        </svg>
    </div>
    
    <!-- Navigation controls for slides -->
    <div class="nav-controls" id="nav-controls">
        <div class="nav-button" id="prev-slide">◀</div>
        <div class="nav-button" id="next-slide">▶</div>
    </div>
    
    <!-- Keyboard hint -->
    <div class="keyboard-hint" id="keyboard-hint">
        使用 <span class="key">↑</span> <span class="key">↓</span> <span class="key">←</span> <span class="key">→</span> 键控制航班飞行和幻灯片切换
    </div>
    
    <!-- Fullscreen content view -->
    <div class="fullscreen-view" id="fullscreen-view">
        <div class="back-button" id="back-button">
            <svg class="back-to-map-icon" viewBox="0 0 24 24">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" fill="currentColor"/>
            </svg>
        </div>
        <div class="loading-spinner" id="loading-spinner"></div>
        <iframe id="fullscreen-content" src=""></iframe>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Location data - defines positions of each station
            const locations = [
                { id: 1, title: "研究背景与目标", x: 30, y: 20 },
                { id: 2, title: "项目研究内容", x: 20, y: 40 },
                { id: 3, title: "数字化教材平台", x: 40, y: 55 },
                { id: 4, title: "虚拟实验库", x: 60, y: 40 },
                { id: 5, title: "思政案例库", x: 70, y: 60 },
                { id: 6, title: "智能习题库", x: 80, y: 30 },
                { id: 7, title: "教学应用模式", x: 65, y: 15 },
                { id: 8, title: "学习效果评价", x: 45, y: 25 },
                { id: 9, title: "结束页", x: 50, y: 75 }
            ];
            
            // Initialize state
            let currentLocationId = 1;
            let isMapView = true;
            let isSlideView = false;
            
            // DOM references
            const mapContainer = document.getElementById('map-container');
            const slidesContainer = document.getElementById('slides-container');
            const airplane = document.getElementById('airplane');
            const backToMapBtn = document.getElementById('back-to-map');
            const navControls = document.getElementById('nav-controls');
            const prevSlideBtn = document.getElementById('prev-slide');
            const nextSlideBtn = document.getElementById('next-slide');
            const welcomeOverlay = document.getElementById('welcome-overlay');
            const startJourneyBtn = document.getElementById('start-journey');
            const keyboardHint = document.getElementById('keyboard-hint');
            
            // Create path SVG element
            function createFlightPath() {
                const mapWidth = mapContainer.offsetWidth;
                const mapHeight = mapContainer.offsetHeight;
                
                // Create SVG element
                const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute("width", mapWidth);
                svg.setAttribute("height", mapHeight);
                svg.setAttribute("class", "flight-path");
                
                // Create path
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                let pathData = "M";
                
                // Add path points
                locations.forEach((location, index) => {
                    const x = (location.x / 100) * mapWidth;
                    const y = (location.y / 100) * mapHeight;
                    
                    if (index === 0) {
                        pathData += `${x},${y}`;
                    } else {
                        pathData += ` L${x},${y}`;
                    }
                });
                
                path.setAttribute("d", pathData);
                svg.appendChild(path);
                
                // Add to map container
                mapContainer.appendChild(svg);
            }
            
            // Create location markers
            function createLocationMarkers() {
                const mapWidth = mapContainer.offsetWidth;
                const mapHeight = mapContainer.offsetHeight;
                
                locations.forEach(location => {
                    // Create marker
                    const marker = document.createElement('div');
                    marker.className = 'location-marker';
                    marker.setAttribute('data-id', location.id);
                    marker.textContent = location.id;
                    
                    // Calculate position
                    const x = (location.x / 100) * mapWidth;
                    const y = (location.y / 100) * mapHeight;
                    
                    marker.style.left = `${x}px`;
                    marker.style.top = `${y}px`;
                    
                    // Add click handler
                    marker.addEventListener('click', function() {
                        const locationId = parseInt(this.getAttribute('data-id'));
                        flyToLocation(locationId);
                    });
                    
                    // Add to map container
                    mapContainer.appendChild(marker);
                    
                    // Create title popup
                    const title = document.createElement('div');
                    title.className = 'location-title';
                    title.textContent = location.title;
                    title.style.left = `${x}px`;
                    title.style.top = `${y}px`;
                    mapContainer.appendChild(title);
                    
                    // Create label
                    const label = document.createElement('div');
                    label.className = 'location-label';
                    label.textContent = location.title;
                    label.style.left = `${x}px`;
                    label.style.top = `${y + 25}px`;
                    mapContainer.appendChild(label);
                });
                
                // Set initial airplane position to the first location
                updateAirplanePosition(locations[0]);
            }
            
            // Update airplane position
            function updateAirplanePosition(location) {
                const mapWidth = mapContainer.offsetWidth;
                const mapHeight = mapContainer.offsetHeight;
                
                const x = (location.x / 100) * mapWidth;
                const y = (location.y / 100) * mapHeight;
                
                airplane.style.left = `${x - 20}px`;
                airplane.style.top = `${y - 20}px`;
            }
            
            // Calculate rotation angle between two points
            function calculateAngle(startX, startY, endX, endY) {
                return Math.atan2(endY - startY, endX - startX) * (180 / Math.PI);
            }
            
            // Fly to a specific location
            function flyToLocation(locationId) {
                if (currentLocationId === locationId && !isMapView) {
                    return; // Already at this location in slide view
                }
                
                const fromLocation = locations.find(loc => loc.id === currentLocationId);
                const toLocation = locations.find(loc => loc.id === locationId);
                
                if (!fromLocation || !toLocation) {
                    return;
                }
                
                // Update markers
                document.querySelectorAll('.location-marker').forEach(marker => {
                    marker.classList.remove('current');
                    if (parseInt(marker.getAttribute('data-id')) === locationId) {
                        marker.classList.add('current');
                    }
                });
                
                const mapWidth = mapContainer.offsetWidth;
                const mapHeight = mapContainer.offsetHeight;
                
                const fromX = (fromLocation.x / 100) * mapWidth;
                const fromY = (fromLocation.y / 100) * mapHeight;
                const toX = (toLocation.x / 100) * mapWidth;
                const toY = (toLocation.y / 100) * mapHeight;
                
                // Calculate angle for airplane rotation
                const angle = calculateAngle(fromX, fromY, toX, toY);
                airplane.style.transform = `rotate(${angle}deg)`;
                
                // Move airplane to new location
                setTimeout(() => {
                    updateAirplanePosition(toLocation);
                    
                    // After a delay, zoom into the location
                    setTimeout(() => {
                        // Hide map and show slide
                        if (isMapView) {
                            showSlide(locationId);
                        }
                    }, 1000);
                }, 100);
                
                currentLocationId = locationId;
            }
            
            // Show a specific slide
            function showSlide(slideId) {
                // Hide map view
                mapContainer.classList.add('hidden');
                isMapView = false;
                isSlideView = true;
                
                // Show slide
                document.querySelectorAll('.slide').forEach(slide => {
                    slide.classList.remove('active');
                });
                const slide = document.getElementById(`slide-${slideId}`);
                if (slide) {
                    slide.classList.add('active');
                    
                    // Load iframe content if present
                    const iframe = slide.querySelector('iframe[data-src]');
                    if (iframe && !iframe.src) {
                        iframe.src = iframe.getAttribute('data-src');
                    }
                }
                
                // Show back to map button and slide controls
                backToMapBtn.classList.add('visible');
                navControls.classList.add('visible');
            }
            
            // Return to map view
            function returnToMapView() {
                // Hide slide view
                document.querySelectorAll('.slide').forEach(slide => {
                    slide.classList.remove('active');
                });
                isSlideView = false;
                
                // Show map view
                mapContainer.classList.remove('hidden');
                isMapView = true;
                
                // Hide back to map button and slide controls
                backToMapBtn.classList.remove('visible');
                navControls.classList.remove('visible');
            }
            
            // Navigate to previous slide
            function prevSlide() {
                if (!isSlideView) return;
                
                const newId = Math.max(1, currentLocationId - 1);
                if (newId !== currentLocationId) {
                    returnToMapView();
                    setTimeout(() => {
                        flyToLocation(newId);
                    }, 500);
                }
            }
            
            // Navigate to next slide
            function nextSlide() {
                if (!isSlideView) return;
                
                const maxId = locations.length;
                const newId = Math.min(maxId, currentLocationId + 1);
                if (newId !== currentLocationId) {
                    returnToMapView();
                    setTimeout(() => {
                        flyToLocation(newId);
                    }, 500);
                }
            }
            
            // Initialize fullscreen content view
            function initFullscreenView() {
                const fullscreenView = document.getElementById('fullscreen-view');
                const fullscreenContent = document.getElementById('fullscreen-content');
                const backButton = document.getElementById('back-button');
                const loadingSpinner = document.getElementById('loading-spinner');
                
                // Show loading spinner when iframe loads
                fullscreenContent.addEventListener('load', function() {
                    loadingSpinner.style.display = 'none';
                });
                
                // Add event listeners to all fullscreen buttons
                document.querySelectorAll('.view-fullscreen').forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.stopPropagation(); // Prevent the event from bubbling up
                        
                        const src = this.getAttribute('data-src');
                        if (src) {
                            loadingSpinner.style.display = 'block'; // Show loading spinner
                            fullscreenContent.src = src;
                            fullscreenView.style.display = 'block';
                            
                            // Add active class after a small delay for animation
                            setTimeout(() => {
                                fullscreenView.classList.add('active');
                            }, 10);
                        }
                    });
                });
                
                // Back button to close fullscreen view
                backButton.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent the event from bubbling up
                    
                    fullscreenView.classList.remove('active');
                    
                    // Hide the fullscreen view after the transition
                    setTimeout(() => {
                        fullscreenView.style.display = 'none';
                        // Optional: Clear iframe src to prevent continued playback
                        // fullscreenContent.src = '';
                    }, 500);
                });
            }
            
            // Start the journey after welcome screen
            startJourneyBtn.addEventListener('click', function() {
                welcomeOverlay.style.opacity = '0';
                setTimeout(() => {
                    welcomeOverlay.style.display = 'none';
                }, 1000);
                
                // Initialize the map
                createFlightPath();
                createLocationMarkers();
                
                // Hide keyboard hint after 5 seconds
                setTimeout(() => {
                    keyboardHint.style.opacity = '0';
                    setTimeout(() => {
                        keyboardHint.style.display = 'none';
                    }, 1000);
                }, 5000);
            });
            
            // Event listeners
            backToMapBtn.addEventListener('click', returnToMapView);
            prevSlideBtn.addEventListener('click', prevSlide);
            nextSlideBtn.addEventListener('click', nextSlide);
            
            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (document.getElementById('fullscreen-view').style.display === 'block') {
                    // Only handle Escape key in fullscreen view
                    if (e.key === 'Escape') {
                        document.getElementById('back-button').click();
                    }
                    return;
                }
                
                if (isMapView) {
                    // Map view navigation
                    const step = 2;
                    
                    if (e.key === 'ArrowRight') {
                        // Find the next location to the right
                        const currentLoc = locations.find(loc => loc.id === currentLocationId);
                        let nextLoc = null;
                        let minDistance = Infinity;
                        
                        locations.forEach(loc => {
                            if (loc.id !== currentLocationId && loc.x > currentLoc.x) {
                                const dist = Math.sqrt(Math.pow(loc.x - currentLoc.x, 2) + Math.pow(loc.y - currentLoc.y, 2));
                                if (dist < minDistance) {
                                    minDistance = dist;
                                    nextLoc = loc;
                                }
                            }
                        });
                        
                        if (nextLoc) {
                            flyToLocation(nextLoc.id);
                        }
                    } else if (e.key === 'ArrowLeft') {
                        // Find the next location to the left
                        const currentLoc = locations.find(loc => loc.id === currentLocationId);
                        let nextLoc = null;
                        let minDistance = Infinity;
                        
                        locations.forEach(loc => {
                            if (loc.id !== currentLocationId && loc.x < currentLoc.x) {
                                const dist = Math.sqrt(Math.pow(loc.x - currentLoc.x, 2) + Math.pow(loc.y - currentLoc.y, 2));
                                if (dist < minDistance) {
                                    minDistance = dist;
                                    nextLoc = loc;
                                }
                            }
                        });
                        
                        if (nextLoc) {
                            flyToLocation(nextLoc.id);
                        }
                    } else if (e.key === 'ArrowUp') {
                        // Find the next location above
                        const currentLoc = locations.find(loc => loc.id === currentLocationId);
                        let nextLoc = null;
                        let minDistance = Infinity;
                        
                        locations.forEach(loc => {
                            if (loc.id !== currentLocationId && loc.y < currentLoc.y) {
                                const dist = Math.sqrt(Math.pow(loc.x - currentLoc.x, 2) + Math.pow(loc.y - currentLoc.y, 2));
                                if (dist < minDistance) {
                                    minDistance = dist;
                                    nextLoc = loc;
                                }
                            }
                        });
                        
                        if (nextLoc) {
                            flyToLocation(nextLoc.id);
                        }
                    } else if (e.key === 'ArrowDown') {
                        // Find the next location below
                        const currentLoc = locations.find(loc => loc.id === currentLocationId);
                        let nextLoc = null;
                        let minDistance = Infinity;
                        
                        locations.forEach(loc => {
                            if (loc.id !== currentLocationId && loc.y > currentLoc.y) {
                                const dist = Math.sqrt(Math.pow(loc.x - currentLoc.x, 2) + Math.pow(loc.y - currentLoc.y, 2));
                                if (dist < minDistance) {
                                    minDistance = dist;
                                    nextLoc = loc;
                                }
                            }
                        });
                        
                        if (nextLoc) {
                            flyToLocation(nextLoc.id);
                        }
                    } else if (e.key === 'Enter' || e.key === ' ') {
                        // Enter the current location
                        showSlide(currentLocationId);
                    }
                } else if (isSlideView) {
                    // Slide view navigation
                    if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                        prevSlide();
                    } else if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ') {
                        nextSlide();
                    } else if (e.key === 'Escape') {
                        returnToMapView();
                    }
                }
            });
            
            // Initialize fullscreen view
            initFullscreenView();
            
            // Adjust to window resize
            window.addEventListener('resize', function() {
                // Recreate flight path with new dimensions
                const existingPath = document.querySelector('.flight-path');
                if (existingPath) {
                    existingPath.remove();
                }
                createFlightPath();
                
                // Reposition markers
                const mapWidth = mapContainer.offsetWidth;
                const mapHeight = mapContainer.offsetHeight;
                
                document.querySelectorAll('.location-marker').forEach(marker => {
                    const locationId = parseInt(marker.getAttribute('data-id'));
                    const location = locations.find(loc => loc.id === locationId);
                    if (location) {
                        const x = (location.x / 100) * mapWidth;
                        const y = (location.y / 100) * mapHeight;
                        marker.style.left = `${x}px`;
                        marker.style.top = `${y}px`;
                    }
                });
                
                // Reposition location labels
                document.querySelectorAll('.location-label').forEach(label => {
                    const index = Array.from(label.parentNode.children).indexOf(label) - 2;
                    if (index >= 0 && index < locations.length) {
                        const location = locations[index];
                        const x = (location.x / 100) * mapWidth;
                        const y = (location.y / 100) * mapHeight;
                        label.style.left = `${x}px`;
                        label.style.top = `${y + 25}px`;
                    }
                });
                
                // Reposition title popups
                document.querySelectorAll('.location-title').forEach(title => {
                    const index = Array.from(title.parentNode.children).indexOf(title) - 1;
                    if (index >= 0 && index < locations.length) {
                        const location = locations[index];
                        const x = (location.x / 100) * mapWidth;
                        const y = (location.y / 100) * mapHeight;
                        title.style.left = `${x}px`;
                        title.style.top = `${y}px`;
                    }
                });
                
                // Update airplane position
                const currentLocation = locations.find(loc => loc.id === currentLocationId);
                if (currentLocation) {
                    updateAirplanePosition(currentLocation);
                }
            });
        });
    </script>
</body>
</html>
